/*!
 * morsio.js
 * ---------
 * Library for parsing and sounding morse tones
 *
 * @version 0.1.0
 * @license MIT
 * @author mach3 <http://github.com/mach3>
 * @require jquery#1
 */
!function(a,b){var c={},d=c.Composer=function(){this._construct.apply(this,arguments)};!function(){var b=d.prototype;b.defaults={mode:"alpha",time:100,process:a.noop,complete:a.noop},b.options=null,b.codes=null,b._codes=null,b.playing=!1,b.timer=null,b._construct=function(a){this.config(this.defaults).config(a),this.process=this.process.bind(this)},b.config=function(b,c){switch(a.type(b)){case"object":return this.options=a.extend(!0,{},this.options,b),this;case"string":return arguments.length>1?(this.options[b]=c,this):this.options[b]}},b.parse=function(a){var b,c;return b=this,c=this.map(),this.codes=[],a.toLowerCase().split("").forEach(function(a){var d=c[a.charCodeAt(0)];return d?(d.split("").forEach(function(a){a=parseInt(a,10),b.codes.push([!0,a]),b.codes.push([!1,1])}),void b.codes.push([!1,3])):void b.codes.push([!1,7])}),this},b.map=function(){var b,d={};return b=c.map,a.extend(d,b.symbol,b.num,b[this.config("mode")]),d},b.play=function(){return this.playing||(this.playing=!0,this._codes=this.codes,this.process()),this},b.stop=function(){this.playing=!1,clearTimeout(this.timer)},b.process=function(){var a,b=this.options;if(this.playing){if(a=this._codes.shift(),!this._codes.length||!a.length)return b.complete(),void(this.playing=!1);b.process.apply(this,a),this.timer=setTimeout(this.process,a[1]*b.time)}}}();var e=c.Tone=function(){this._construct.apply(this,arguments)};!function(){var b=e.prototype;b.defaults={url:"morse.ogg"},b.options=null,b.loaded=!1,b.onLoaded=null,b.context=null,b.source=null,b._construct=function(a){this.config(this.defaults).config(a),this.load()},b.config=function(){return d.prototype.config.apply(this,arguments)},b.load=function(){var b,c;return b=this,this.context=new AudioContext,handler=function(c){b.context.decodeAudioData(c.target.response,function(c){b.source=b._getSource(c,b.context),a.isFunction(b.onLoaded)&&(b.onLoaded.call(b),b.onLoaded=null)})},c=new XMLHttpRequest,c.open("GET",this.config("url")),c.responseType="arraybuffer",c.addEventListener("load",handler),c.send(),this},b._getSource=function(a,b){var c=b.createBufferSource();return c.buffer=a,c.connect(b.destination),c.loop=!0,c.gain.value=0,c.noteOn(0),c},b.ready=function(a){return this.loaded?(a.call(this),this):(this.onLoaded=a,this)},b.on=function(){this.source.gain.value=1},b.off=function(){this.source.gain.value=0},b.toggle=function(a){this.source.gain.value=a?1:0}}(),b.morsio=c}(jQuery,window),function(a,b){var c=b.morsio=b.morsio||{};c.map={alpha:{97:"13",98:"3111",99:"3131",100:"311",101:"1",102:"1131",103:"331",104:"1111",105:"11",106:"1333",107:"313",108:"1311",109:"33",110:"31",111:"333",112:"1331",113:"3313",114:"131",115:"111",116:"3",117:"113",118:"1113",119:"133",120:"3113",121:"3133",122:"3311"},num:{48:"33333",49:"13333",50:"11333",51:"11133",52:"11113",53:"11111",54:"31111",55:"33111",56:"33311",57:"33331"},symbol:{33:"313133",40:"31331",41:"313313",44:"331133",45:"311113",46:"131313",47:"31131",63:"113311",64:"133131","72,72":"11111111"},kana:{12443:"11",12444:"11331",12450:"33133",12452:"13",12454:"113",12456:"31333",12458:"13111",12459:"1311",12461:"31311",12463:"1113",12465:"3133",12467:"3333",12469:"31313",12471:"33131",12473:"33313",12475:"13331",12477:"3331",12479:"31",12481:"1131",12484:"1331",12486:"13133",12488:"11311",12490:"131",12491:"3131",12492:"1111",12493:"3313",12494:"1133",12495:"3111",12498:"33113",12501:"3311",12504:"1",12507:"311",12510:"3113",12511:"11313",12512:"3",12513:"31113",12514:"31131",12516:"133",12518:"31133",12520:"33",12521:"111",12522:"331",12523:"31331",12524:"333",12525:"1313",12527:"313",12528:"13113",12529:"13311",12530:"1333",12531:"13131"}}}(jQuery,window);